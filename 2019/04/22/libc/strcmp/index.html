<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="stylesheet" href="/css/post.css"><link rel="icon" href="/img/favicon.png"><title>strcmp</title><meta name="generator" content="Hexo 6.0.0"></head><body>　　<div class="inner"><h2>strcmp</h2><p>函数<a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/cstring/strcmp/"><strong>strcmp</strong></a>对两个C字符串按<strong>字典序</strong>进行比较。其声明如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">strcmp</span> <span class="params">(<span class="type">const</span> <span class="type">char</span> * str1, <span class="type">const</span> <span class="type">char</span> * str2)</span>;</span><br></pre></td></tr></table></figure>

<p>strcmp的返回值类型是int，不同返回值有不同含义：</p>
<ul>
<li>返回值小于0时，str1小于str2；</li>
<li>返回值等于0时，str1等于str2;</li>
<li>返回值大于0时，str1大于str2。</li>
</ul>
<p>一定要注意，并不一定返回-1、0、1这三个值，我就曾经被人误导过。使用strcmp有一点需要注意：必须保证传入的str1和str2是合法的C字符串（以’\0’结尾的字符串），否则可能导致<strong>overflow</strong>。</p>
<hr>
<p>让我们看其实现（string&#x2F;strcmp.c）:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Copyright (C) 1991, 1996, 1997, 2003 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="comment">   This file is part of the GNU C Library.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Compare S1 and S2, returning less than, equal to or</span></span><br><span class="line"><span class="comment">   greater than zero if S1 is lexicographically less than,</span></span><br><span class="line"><span class="comment">   equal to or greater than S2.  */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">strcmp</span> <span class="params">(p1, p2)</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *p1;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *p2; &#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *s1 = (<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *) p1;</span><br><span class="line">    <span class="keyword">register</span> <span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *s2 = (<span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> *) p2;</span><br><span class="line">    <span class="type">unsigned</span> reg_char c1, c2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        c1 = (<span class="type">unsigned</span> <span class="type">char</span>) *s1++;</span><br><span class="line">        c2 = (<span class="type">unsigned</span> <span class="type">char</span>) *s2++;</span><br><span class="line">        <span class="keyword">if</span> (c1 == <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> c1 - c2;</span><br><span class="line">    &#125; <span class="keyword">while</span> (c1 == c2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> c1 - c2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先声明并定义了s1和s2。因为s1和s2由<strong>register</strong>修饰，在存取s1和s2时可能会更加高效。 接下来是一个<code>do&#123;&#125;while();</code>循环，对传入的两个字符串的字符一一做比较。这里的代码十分简单，没什么好详细说明的，要注意的就是：这里两处语句返回的都是<code>c1 - c2</code>，在使用strcmp的返回值时要注意。</p>
<hr>
<p>一些说明：</p>
<ul>
<li><strong>reg_char</strong>：已在<a href="https://coderdeepwater.cn/c_cpp/stdlibc/string_h/strcpy/"><strong>《strcpy》</strong></a>中解释，不再赘叙。</li>
</ul>
<p><span></span><a href="/">返回首页</a><span></span></p></div><script src="/js/jquery.min.js"></script><script src="/js/main.js"></script></body></html>