<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="stylesheet" href="/css/post.css"><link rel="icon" href="/img/favicon.png"><title>strspn</title><meta name="generator" content="Hexo 6.0.0"></head><body>　　<div class="inner"><h2>strspn</h2><p><strong>strspn</strong>的声明如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">size_t</span> <span class="title function_">strspn</span> <span class="params">(<span class="type">const</span> <span class="type">char</span> * s, <span class="type">const</span> <span class="type">char</span> * accept)</span>;</span><br></pre></td></tr></table></figure>

<p>strspn的目的，用标准库的注释来说明是再好不过了： ”<strong>Return the length of the maximum initial segment of s which contains only characters in accept</strong>。“ 使用strspn需要注意：</p>
<ul>
<li>参数s和accept必须是合法的C字符串（必须有’\0’表示字符串的结束）。</li>
</ul>
<hr>
<p>分析strspn的实现（string&#x2F;strspn.c）：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Copyright (C) 1991, 1997, 2003 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="comment">   This file is part of the GNU C Library.*/</span></span><br><span class="line"><span class="comment">/* Return the length of the maximum initial segment</span></span><br><span class="line"><span class="comment">   of S which contains only characters in ACCEPT.  */</span></span><br><span class="line"><span class="type">size_t</span> <span class="title function_">strspn</span> <span class="params">(s, accept)</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *s;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *accept;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *p;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *a;</span><br><span class="line">    <span class="type">size_t</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (p = s; *p != <span class="string">&#x27;\0&#x27;</span>; ++p) &#123;</span><br><span class="line">        <span class="keyword">for</span> (a = accept; *a != <span class="string">&#x27;\0&#x27;</span>; ++a)</span><br><span class="line">            <span class="keyword">if</span> (*p == *a)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> (*a == <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>strspn的实现非常简单：两层嵌套循环。 strspn遍历字符数组s中的字符，对当前访问的字符进行判断；如果当前字符存在于字符数组accept中，则计数count加1；否则返回已有计数count。 strspn运行的时间复杂度是多少呢？就源代码而言，很容易得出strspn的时间复杂度为： $$ O(n^{2}) $$ 但一般使用此函数时，accept的长度是常数且比较小；比如你使用strspn跳过字符串中的前导空白符；此时strspn的时间复杂度可认为是： $$ O(n) $$</p>
<p><span></span><a href="/">返回首页</a><span></span></p></div><script src="/js/jquery.min.js"></script><script src="/js/main.js"></script></body></html>